[2025-03-24 02:19:48] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:19:48] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-03-24 02:19:48] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-03-24 02:19:48] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-03-24 02:19:48] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-03-24 02:19:48] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-03-24 02:20:13] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:20:13] [DEBUG] Query: SELECT o.*, 
                 (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                 FROM orders o
                 WHERE o.customer_id = ?
                 ORDER BY o.created_at DESC
Params: ["4"]
[2025-03-24 02:20:38] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:20:38] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-03-24 02:20:38] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-03-24 02:20:38] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-03-24 02:20:38] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-03-24 02:20:38] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-03-24 02:21:11] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:21:11] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-03-24 02:21:11] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-03-24 02:21:11] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-03-24 02:21:11] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-03-24 02:21:11] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-03-24 02:21:16] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:21:16] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-03-24 02:21:16] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-03-24 02:21:16] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-03-24 02:21:16] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-03-24 02:21:16] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-03-24 02:21:33] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:21:33] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-03-24 02:21:33] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-03-24 02:21:33] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-03-24 02:21:33] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-03-24 02:21:33] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-03-24 02:22:19] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:22:19] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-03-24 02:22:19] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-03-24 02:22:19] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-03-24 02:22:19] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-03-24 02:22:19] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-03-24 02:22:20] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:22:20] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["user_4"]
[2025-03-24 02:22:20] [DEBUG] Query: SELECT * FROM promotions 
                 WHERE status = 'active' 
                 AND (NOW() BETWEEN start_date AND end_date)
                 ORDER BY min_order_amount DESC
Params: []
[2025-03-24 02:22:41] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:22:42] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:22:42] [DEBUG] Query: SELECT o.*, 
                 (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                 FROM orders o
                 WHERE o.customer_id = ?
                 ORDER BY o.created_at DESC
Params: ["4"]
[2025-03-24 02:22:43] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:22:43] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-03-24 02:22:43] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-03-24 02:22:43] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-03-24 02:22:43] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-03-24 02:22:43] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-03-24 02:22:46] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:22:46] [DEBUG] Query: SELECT o.*, 
                 (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                 FROM orders o
                 WHERE o.customer_id = ?
                 ORDER BY o.created_at DESC
Params: ["4"]
[2025-03-24 02:22:51] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:22:51] [DEBUG] Query: SELECT o.*, 
                 (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                 FROM orders o
                 WHERE o.customer_id = ?
                 ORDER BY o.created_at DESC
Params: ["4"]
[2025-03-24 02:23:06] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:23:06] [DEBUG] Query: SELECT o.*, 
                 (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                 FROM orders o
                 WHERE o.customer_id = ?
                 ORDER BY o.created_at DESC
Params: ["4"]
[2025-03-24 02:23:11] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:23:11] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["user_4"]
[2025-03-24 02:23:11] [DEBUG] Query: SELECT * FROM promotions 
                 WHERE status = 'active' 
                 AND (NOW() BETWEEN start_date AND end_date)
                 ORDER BY min_order_amount DESC
Params: []
[2025-03-24 02:23:36] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:23:36] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:23:36] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-03-24 02:23:36] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-03-24 02:23:36] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-03-24 02:23:36] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-03-24 02:23:36] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-03-24 02:23:40] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:23:40] [DEBUG] Query: SELECT o.*, 
                 (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                 FROM orders o
                 WHERE o.customer_id = ?
                 ORDER BY o.created_at DESC
Params: ["4"]
[2025-03-24 02:23:41] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 02:23:41] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: [5,"4"]
[2025-03-24 02:23:41] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: [5]
[2025-03-24 09:54:57] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 09:54:57] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: [5,"4"]
[2025-03-24 09:54:57] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: [5]
[2025-03-24 09:59:59] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 09:59:59] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: [5,"4"]
[2025-03-24 09:59:59] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: [5]
[2025-03-24 10:03:41] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:03:41] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: [5,"4"]
[2025-03-24 10:03:41] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: [5]
[2025-03-24 10:05:39] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:05:39] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: [5,"4"]
[2025-03-24 10:05:39] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: [5]
[2025-03-24 10:05:42] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:05:42] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: [5,"4"]
[2025-03-24 10:05:42] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: [5]
[2025-03-24 10:06:20] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:06:20] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: [5,"4"]
[2025-03-24 10:06:20] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: [5]
[2025-03-24 10:13:55] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:13:55] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-03-24 10:13:55] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-03-24 10:13:55] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-03-24 10:13:55] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-03-24 10:13:55] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-03-24 10:14:20] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:14:20] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:14:20] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-03-24 10:14:20] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-03-24 10:14:20] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-03-24 10:14:20] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-03-24 10:14:20] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-03-24 10:14:37] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:14:37] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:14:37] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-03-24 10:14:37] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-03-24 10:14:37] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-03-24 10:14:37] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-03-24 10:14:37] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-03-24 10:14:48] [DEBUG] Query: SELECT * FROM users WHERE username = ? AND status = 'active'
Params: ["admin"]
[2025-03-24 10:14:54] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:14:54] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:14:54] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                ORDER BY p.name
Params: []
[2025-03-24 10:16:26] [DEBUG] Query: SELECT * FROM users WHERE username = ? AND status = 'active'
Params: ["customer1"]
[2025-03-24 10:16:31] [DEBUG] Query: SELECT * FROM users WHERE username = ? AND status = 'active'
Params: ["customer1"]
[2025-03-24 10:16:31] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:16:31] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-03-24 10:16:31] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-03-24 10:16:31] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-03-24 10:16:31] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-03-24 10:16:31] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-03-24 10:16:55] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:16:55] [DEBUG] Query: SELECT m.*, 
                 CASE 
                    WHEN m.sender_id = ? THEN 'outgoing' 
                    ELSE 'incoming' 
                 END as direction,
                 u.name as user_name, u.role as user_role
                 FROM messages m
                 LEFT JOIN users u ON (
                    CASE 
                        WHEN m.sender_id = ? THEN m.receiver_id 
                        ELSE m.sender_id 
                    END = u.id
                 )
                 WHERE m.sender_id = ? OR m.receiver_id = ?
                 ORDER BY m.created_at DESC
Params: ["4","4","4","4"]
[2025-03-24 10:19:09] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:19:09] [DEBUG] Query: SELECT m.*, 
                 CASE 
                    WHEN m.sender_id = ? THEN 'outgoing' 
                    ELSE 'incoming' 
                 END as direction,
                 u.name as user_name, u.role as user_role
                 FROM messages m
                 LEFT JOIN users u ON (
                    CASE 
                        WHEN m.sender_id = ? THEN m.receiver_id 
                        ELSE m.sender_id 
                    END = u.id
                 )
                 WHERE m.sender_id = ? OR m.receiver_id = ?
                 ORDER BY m.created_at DESC
Params: ["4","4","4","4"]
[2025-03-24 10:19:19] [DEBUG] Query: SELECT * FROM users WHERE username = ? AND status = 'active'
Params: ["admin"]
[2025-03-24 10:19:25] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:19:25] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:19:25] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                ORDER BY p.name
Params: []
[2025-03-24 10:19:26] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:19:26] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:19:26] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                WHERE p.id = ?
Params: [6]
[2025-03-24 10:19:29] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:19:29] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:19:29] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                WHERE p.id = ?
Params: [6]
[2025-03-24 10:19:29] [DEBUG] Query: SELECT * FROM products WHERE id = ?
Params: [6]
[2025-03-24 10:19:29] [DEBUG] Query: UPDATE products SET category_id = ?, name = ?, description = ?, details = ?, price = ?, min_stock = ?, year = ?, alcohol = ?, volume = ?, image = ?, featured = ?, status = ? WHERE id = ?
Params: [4,"\u0406\u0433\u0440\u0438\u0441\u0442\u0435 \u0411\u0440\u044e\u0442","\u0421\u0443\u0445\u0435 \u0456\u0433\u0440\u0438\u0441\u0442\u0435 \u0432\u0438\u043d\u043e, \u0432\u0438\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u0435 \u0437\u0430 \u043a\u043b\u0430\u0441\u0438\u0447\u043d\u043e\u044e \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0456\u0454\u044e","\u0415\u043b\u0435\u0433\u0430\u043d\u0442\u043d\u0435 \u0456\u0433\u0440\u0438\u0441\u0442\u0435 \u0432\u0438\u043d\u043e \u0437 \u0442\u043e\u043d\u043a\u0438\u043c \u0430\u0440\u043e\u043c\u0430\u0442\u043e\u043c \u0431\u0456\u043b\u0438\u0445 \u043a\u0432\u0456\u0442\u0456\u0432 \u0442\u0430 \u044f\u0431\u043b\u0443\u043a. \u041c\u0430\u0454 \u0441\u0442\u0456\u0439\u043a\u0443 \u0434\u0440\u0456\u0431\u043d\u0443 \u043f\u0435\u0440\u043b\u0438\u043d\u0443 \u0442\u0430 \u043e\u0441\u0432\u0456\u0436\u0430\u044e\u0447\u0438\u0439 \u0441\u043c\u0430\u043a.",399,10,2021,11.5,750,"sparkling_brut.jpg",1,"active",6]
[2025-03-24 10:19:29] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:19:29] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:19:29] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                ORDER BY p.name
Params: []
[2025-03-24 10:19:31] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:19:31] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:19:31] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                WHERE p.id = ?
Params: [6]
[2025-03-24 10:20:23] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:20:23] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:20:23] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                WHERE p.id = ?
Params: [6]
[2025-03-24 10:20:52] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:20:52] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:20:52] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                WHERE p.id = ?
Params: [6]
[2025-03-24 10:21:25] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:21:25] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:21:25] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                WHERE p.id = ?
Params: [6]
[2025-03-24 10:21:25] [DEBUG] Query: SELECT * FROM products WHERE id = ?
Params: [6]
[2025-03-24 10:21:25] [DEBUG] Query: UPDATE products SET category_id = ?, name = ?, description = ?, details = ?, price = ?, min_stock = ?, year = ?, alcohol = ?, volume = ?, image = ?, featured = ?, status = ? WHERE id = ?
Params: [4,"\u0406\u0433\u0440\u0438\u0441\u0442\u0435 \u0411\u0440\u044e\u0442","\u0421\u0443\u0445\u0435 \u0456\u0433\u0440\u0438\u0441\u0442\u0435 \u0432\u0438\u043d\u043e, \u0432\u0438\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u0435 \u0437\u0430 \u043a\u043b\u0430\u0441\u0438\u0447\u043d\u043e\u044e \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0456\u0454\u044e","\u0415\u043b\u0435\u0433\u0430\u043d\u0442\u043d\u0435 \u0456\u0433\u0440\u0438\u0441\u0442\u0435 \u0432\u0438\u043d\u043e \u0437 \u0442\u043e\u043d\u043a\u0438\u043c \u0430\u0440\u043e\u043c\u0430\u0442\u043e\u043c \u0431\u0456\u043b\u0438\u0445 \u043a\u0432\u0456\u0442\u0456\u0432 \u0442\u0430 \u044f\u0431\u043b\u0443\u043a. \u041c\u0430\u0454 \u0441\u0442\u0456\u0439\u043a\u0443 \u0434\u0440\u0456\u0431\u043d\u0443 \u043f\u0435\u0440\u043b\u0438\u043d\u0443 \u0442\u0430 \u043e\u0441\u0432\u0456\u0436\u0430\u044e\u0447\u0438\u0439 \u0441\u043c\u0430\u043a.",399,10,2021,11.5,750,"67e12415ccfce.jpg",1,"active",6]
[2025-03-24 10:21:25] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:21:25] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:21:25] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                ORDER BY p.name
Params: []
[2025-03-24 10:21:28] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:21:28] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:21:28] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                WHERE p.id = ?
Params: [6]
[2025-03-24 10:21:35] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:21:35] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:21:35] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                ORDER BY p.name
Params: []
[2025-03-24 10:22:09] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:22:09] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:22:09] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                ORDER BY p.name
Params: []
[2025-03-24 10:22:10] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:22:10] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:22:10] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                ORDER BY p.name
Params: []
[2025-03-24 10:22:26] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:22:26] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:22:26] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                ORDER BY p.name
Params: []
[2025-03-24 10:22:27] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:22:27] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:22:27] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                ORDER BY p.name
Params: []
[2025-03-24 10:23:50] [DEBUG] Query: SELECT * FROM users WHERE username = ? AND status = 'active'
Params: ["customer1"]
[2025-03-24 10:23:50] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:23:50] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-03-24 10:23:50] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-03-24 10:23:50] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-03-24 10:23:50] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-03-24 10:23:50] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT o.*, 
                 (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                 FROM orders o
                 WHERE o.customer_id = ?
                 ORDER BY o.created_at DESC
Params: ["4"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: ["5","4"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: ["5"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: ["3","4"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: ["3"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: ["1","4"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: ["1"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["2"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["2"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["1","2"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["4"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["4"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["2","4"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["6"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["6"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","6"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["10"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["10"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","10"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["7"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["7"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["5","7"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["8"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["8"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["1","8"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["9"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["9"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["2","9"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["10"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["10"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","10"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["1"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["1"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["1","1"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["3"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["3"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["2","3"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["6"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["6"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","6"]
[2025-03-24 10:23:54] [DEBUG] Query: SELECT m.*, 
                 CASE 
                    WHEN m.sender_id = ? THEN 'outgoing' 
                    ELSE 'incoming' 
                 END as direction,
                 u.name as user_name, u.role as user_role
                 FROM messages m
                 LEFT JOIN users u ON (
                    CASE 
                        WHEN m.sender_id = ? THEN m.receiver_id 
                        ELSE m.sender_id 
                    END = u.id
                 )
                 WHERE m.sender_id = ? OR m.receiver_id = ?
                 ORDER BY m.created_at DESC
Params: ["4","4","4","4"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT o.*, 
                 (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                 FROM orders o
                 WHERE o.customer_id = ?
                 ORDER BY o.created_at DESC
Params: ["4"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT * FROM products WHERE id = ? AND status = 'active'
Params: [6]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT * FROM product_reviews WHERE product_id = ? AND customer_id = ?
Params: [6,"4"]
[2025-03-24 10:24:29] [DEBUG] Query: INSERT INTO product_reviews (product_id, customer_id, rating, review) 
                       VALUES (?, ?, ?, ?)
Params: [6,"4",5,"\u0422\u043e\u043f \u0437\u0430 \u0441\u0432\u043e\u0457 \u0433\u0440\u043e\u0448\u0456"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: ["5","4"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: ["5"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: ["3","4"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: ["3"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: ["1","4"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: ["1"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["2"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["2"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["1","2"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["4"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["4"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["2","4"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["6"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["6"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","6"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["10"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["10"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","10"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["7"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["7"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["5","7"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["8"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["8"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["1","8"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["9"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["9"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["2","9"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["10"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["10"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","10"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["1"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["1"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["1","1"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["3"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["3"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["2","3"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["6"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["6"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","6"]
[2025-03-24 10:24:29] [DEBUG] Query: SELECT m.*, 
                 CASE 
                    WHEN m.sender_id = ? THEN 'outgoing' 
                    ELSE 'incoming' 
                 END as direction,
                 u.name as user_name, u.role as user_role
                 FROM messages m
                 LEFT JOIN users u ON (
                    CASE 
                        WHEN m.sender_id = ? THEN m.receiver_id 
                        ELSE m.sender_id 
                    END = u.id
                 )
                 WHERE m.sender_id = ? OR m.receiver_id = ?
                 ORDER BY m.created_at DESC
Params: ["4","4","4","4"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT o.*, 
                 (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                 FROM orders o
                 WHERE o.customer_id = ?
                 ORDER BY o.created_at DESC
Params: ["4"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: ["5","4"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: ["5"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: ["3","4"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: ["3"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: ["1","4"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: ["1"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["2"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["2"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["1","2"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["4"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["4"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["2","4"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["6"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["6"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","6"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["10"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["10"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","10"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["7"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["7"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["5","7"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["8"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["8"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["1","8"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["9"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["9"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["2","9"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["10"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["10"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","10"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["1"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["1"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["1","1"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["3"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["3"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["2","3"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["6"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["6"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","6"]
[2025-03-24 10:24:34] [DEBUG] Query: SELECT m.*, 
                 CASE 
                    WHEN m.sender_id = ? THEN 'outgoing' 
                    ELSE 'incoming' 
                 END as direction,
                 u.name as user_name, u.role as user_role
                 FROM messages m
                 LEFT JOIN users u ON (
                    CASE 
                        WHEN m.sender_id = ? THEN m.receiver_id 
                        ELSE m.sender_id 
                    END = u.id
                 )
                 WHERE m.sender_id = ? OR m.receiver_id = ?
                 ORDER BY m.created_at DESC
Params: ["4","4","4","4"]
[2025-03-24 10:25:05] [DEBUG] Query: SELECT * FROM users WHERE username = ? AND status = 'active'
Params: ["sales"]
[2025-03-24 10:25:14] [DEBUG] Query: SELECT * FROM users WHERE username = ? AND status = 'active'
Params: ["sales"]
[2025-03-24 10:25:14] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["3"]
[2025-03-24 10:25:14] [DEBUG] Query: SELECT 
                  COUNT(*) as total_orders,
                  SUM(CASE WHEN status = 'pending' THEN 1 ELSE 0 END) as pending_count,
                  SUM(CASE WHEN status = 'processing' THEN 1 ELSE 0 END) as processing_count,
                  SUM(CASE WHEN status = 'ready_for_pickup' THEN 1 ELSE 0 END) as ready_count,
                  SUM(CASE WHEN status = 'shipped' THEN 1 ELSE 0 END) as shipped_count,
                  SUM(CASE WHEN status = 'delivered' THEN 1 ELSE 0 END) as delivered_count,
                  SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END) as completed_count,
                  SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END) as cancelled_count,
                  SUM(total_amount) as total_sales
               FROM orders
               WHERE sales_manager_id = ?
Params: ["3"]
[2025-03-24 10:25:14] [DEBUG] Query: SELECT o.*, 
                         u.name as customer_name, u.phone as customer_phone,
                         COUNT(oi.id) as items_count
                         FROM orders o
                         LEFT JOIN users u ON o.customer_id = u.id
                         LEFT JOIN order_items oi ON o.id = oi.order_id
                         WHERE o.sales_manager_id = ? AND (o.status = 'pending' OR o.status = 'processing')
                         GROUP BY o.id, o.customer_id, o.sales_manager_id, o.total_amount,
                                 o.status, o.payment_status, o.payment_method, o.shipping_address,
                                 o.shipping_cost, o.notes, o.created_at, o.updated_at,
                                 u.name, u.phone
                         ORDER BY o.created_at ASC
                         LIMIT 10
Params: ["3"]
[2025-03-24 10:25:14] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                     FROM messages m
                     JOIN users u ON m.sender_id = u.id
                     WHERE m.receiver_id = ? AND m.is_read = 0
                     ORDER BY m.created_at DESC
Params: ["3"]
[2025-03-24 10:25:14] [DEBUG] Query: SELECT 
                       DATE(created_at) as date,
                       COUNT(*) as order_count,
                       SUM(total_amount) as total_sales
                    FROM orders
                    WHERE sales_manager_id = ? AND created_at >= ?
                    GROUP BY DATE(created_at)
                    ORDER BY DATE(created_at)
Params: ["3","2025-02-22"]
[2025-03-24 10:25:14] [DEBUG] Query: SELECT u.id, u.name, u.email, u.phone,
                        COUNT(o.id) as order_count,
                        SUM(o.total_amount) as total_spent,
                        MAX(o.created_at) as last_order_date
                     FROM users u
                     JOIN orders o ON u.id = o.customer_id
                     WHERE o.sales_manager_id = ?
                     GROUP BY u.id, u.name, u.email, u.phone
                     ORDER BY total_spent DESC
                     LIMIT 5
Params: ["3"]
[2025-03-24 10:25:14] [DEBUG] Query: SELECT p.id, p.name, p.image, pc.name as category_name,
                       SUM(oi.quantity) as total_quantity,
                       COUNT(DISTINCT o.id) as order_count,
                       SUM(oi.quantity * oi.price) as total_sales
                    FROM products p
                    JOIN product_categories pc ON p.category_id = pc.id
                    JOIN order_items oi ON p.id = oi.product_id
                    JOIN orders o ON oi.order_id = o.id
                    WHERE o.sales_manager_id = ?
                    GROUP BY p.id, p.name, p.image, pc.name
                    ORDER BY total_sales DESC
                    LIMIT 5
Params: ["3"]
[2025-03-24 10:27:49] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["3"]
[2025-03-24 10:27:49] [DEBUG] Query: SELECT 
                  COUNT(*) as total_orders,
                  SUM(CASE WHEN status = 'pending' THEN 1 ELSE 0 END) as pending_count,
                  SUM(CASE WHEN status = 'processing' THEN 1 ELSE 0 END) as processing_count,
                  SUM(CASE WHEN status = 'ready_for_pickup' THEN 1 ELSE 0 END) as ready_count,
                  SUM(CASE WHEN status = 'shipped' THEN 1 ELSE 0 END) as shipped_count,
                  SUM(CASE WHEN status = 'delivered' THEN 1 ELSE 0 END) as delivered_count,
                  SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END) as completed_count,
                  SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END) as cancelled_count,
                  SUM(total_amount) as total_sales
               FROM orders
               WHERE sales_manager_id = ?
Params: ["3"]
[2025-03-24 10:27:49] [DEBUG] Query: SELECT o.*, 
                         u.name as customer_name, u.phone as customer_phone,
                         COUNT(oi.id) as items_count
                         FROM orders o
                         LEFT JOIN users u ON o.customer_id = u.id
                         LEFT JOIN order_items oi ON o.id = oi.order_id
                         WHERE o.sales_manager_id = ? AND (o.status = 'pending' OR o.status = 'processing')
                         GROUP BY o.id, o.customer_id, o.sales_manager_id, o.total_amount,
                                 o.status, o.payment_status, o.payment_method, o.shipping_address,
                                 o.shipping_cost, o.notes, o.created_at, o.updated_at,
                                 u.name, u.phone
                         ORDER BY o.created_at ASC
                         LIMIT 10
Params: ["3"]
[2025-03-24 10:27:49] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                     FROM messages m
                     JOIN users u ON m.sender_id = u.id
                     WHERE m.receiver_id = ? AND m.is_read = 0
                     ORDER BY m.created_at DESC
Params: ["3"]
[2025-03-24 10:27:49] [DEBUG] Query: SELECT 
                       DATE(created_at) as date,
                       COUNT(*) as order_count,
                       SUM(total_amount) as total_sales
                    FROM orders
                    WHERE sales_manager_id = ? AND created_at >= ?
                    GROUP BY DATE(created_at)
                    ORDER BY DATE(created_at)
Params: ["3","2025-02-22"]
[2025-03-24 10:27:49] [DEBUG] Query: SELECT u.id, u.name, u.email, u.phone,
                        COUNT(o.id) as order_count,
                        SUM(o.total_amount) as total_spent,
                        MAX(o.created_at) as last_order_date
                     FROM users u
                     JOIN orders o ON u.id = o.customer_id
                     WHERE o.sales_manager_id = ?
                     GROUP BY u.id, u.name, u.email, u.phone
                     ORDER BY total_spent DESC
                     LIMIT 5
Params: ["3"]
[2025-03-24 10:27:49] [DEBUG] Query: SELECT p.id, p.name, p.image, pc.name as category_name,
                       SUM(oi.quantity) as total_quantity,
                       COUNT(DISTINCT o.id) as order_count,
                       SUM(oi.quantity * oi.price) as total_sales
                    FROM products p
                    JOIN product_categories pc ON p.category_id = pc.id
                    JOIN order_items oi ON p.id = oi.product_id
                    JOIN orders o ON oi.order_id = o.id
                    WHERE o.sales_manager_id = ?
                    GROUP BY p.id, p.name, p.image, pc.name
                    ORDER BY total_sales DESC
                    LIMIT 5
Params: ["3"]
[2025-03-24 10:28:05] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["3"]
[2025-03-24 10:28:05] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["3"]
[2025-03-24 10:28:05] [DEBUG] Query: SELECT 
                  COUNT(*) as total_orders,
                  SUM(CASE WHEN status = 'pending' THEN 1 ELSE 0 END) as pending_count,
                  SUM(CASE WHEN status = 'processing' THEN 1 ELSE 0 END) as processing_count,
                  SUM(CASE WHEN status = 'ready_for_pickup' THEN 1 ELSE 0 END) as ready_count,
                  SUM(CASE WHEN status = 'shipped' THEN 1 ELSE 0 END) as shipped_count,
                  SUM(CASE WHEN status = 'delivered' THEN 1 ELSE 0 END) as delivered_count,
                  SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END) as completed_count,
                  SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END) as cancelled_count,
                  SUM(total_amount) as total_sales
               FROM orders
               WHERE sales_manager_id = ?
Params: ["3"]
[2025-03-24 10:28:05] [DEBUG] Query: SELECT o.*, 
                         u.name as customer_name, u.phone as customer_phone,
                         COUNT(oi.id) as items_count
                         FROM orders o
                         LEFT JOIN users u ON o.customer_id = u.id
                         LEFT JOIN order_items oi ON o.id = oi.order_id
                         WHERE o.sales_manager_id = ? AND (o.status = 'pending' OR o.status = 'processing')
                         GROUP BY o.id, o.customer_id, o.sales_manager_id, o.total_amount,
                                 o.status, o.payment_status, o.payment_method, o.shipping_address,
                                 o.shipping_cost, o.notes, o.created_at, o.updated_at,
                                 u.name, u.phone
                         ORDER BY o.created_at ASC
                         LIMIT 10
Params: ["3"]
[2025-03-24 10:28:05] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                     FROM messages m
                     JOIN users u ON m.sender_id = u.id
                     WHERE m.receiver_id = ? AND m.is_read = 0
                     ORDER BY m.created_at DESC
Params: ["3"]
[2025-03-24 10:28:05] [DEBUG] Query: SELECT 
                       DATE(created_at) as date,
                       COUNT(*) as order_count,
                       SUM(total_amount) as total_sales
                    FROM orders
                    WHERE sales_manager_id = ? AND created_at >= ?
                    GROUP BY DATE(created_at)
                    ORDER BY DATE(created_at)
Params: ["3","2025-02-22"]
[2025-03-24 10:28:05] [DEBUG] Query: SELECT u.id, u.name, u.email, u.phone,
                        COUNT(o.id) as order_count,
                        SUM(o.total_amount) as total_spent,
                        MAX(o.created_at) as last_order_date
                     FROM users u
                     JOIN orders o ON u.id = o.customer_id
                     WHERE o.sales_manager_id = ?
                     GROUP BY u.id, u.name, u.email, u.phone
                     ORDER BY total_spent DESC
                     LIMIT 5
Params: ["3"]
[2025-03-24 10:28:05] [DEBUG] Query: SELECT p.id, p.name, p.image, pc.name as category_name,
                       SUM(oi.quantity) as total_quantity,
                       COUNT(DISTINCT o.id) as order_count,
                       SUM(oi.quantity * oi.price) as total_sales
                    FROM products p
                    JOIN product_categories pc ON p.category_id = pc.id
                    JOIN order_items oi ON p.id = oi.product_id
                    JOIN orders o ON oi.order_id = o.id
                    WHERE o.sales_manager_id = ?
                    GROUP BY p.id, p.name, p.image, pc.name
                    ORDER BY total_sales DESC
                    LIMIT 5
Params: ["3"]
[2025-03-24 10:28:17] [DEBUG] Query: SELECT * FROM users WHERE username = ? AND status = 'active'
Params: ["admin"]
[2025-03-24 10:28:22] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:28:22] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:28:22] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                ORDER BY p.name
Params: []
[2025-03-24 10:28:26] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:28:26] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:28:26] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                WHERE p.id = ?
Params: [10]
[2025-03-24 10:28:30] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:28:30] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:28:30] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                WHERE p.id = ?
Params: [10]
[2025-03-24 10:28:30] [DEBUG] Query: SELECT * FROM products WHERE id = ?
Params: [10]
[2025-03-24 10:28:30] [DEBUG] Query: UPDATE products SET category_id = ?, name = ?, description = ?, details = ?, price = ?, min_stock = ?, year = ?, alcohol = ?, volume = ?, image = ?, featured = ?, status = ? WHERE id = ?
Params: [4,"\u0406\u0433\u0440\u0438\u0441\u0442\u0435 \u0421\u043e\u043b\u043e\u0434\u043a\u0435","\u0421\u043e\u043b\u043e\u0434\u043a\u0435 \u0456\u0433\u0440\u0438\u0441\u0442\u0435 \u0432\u0438\u043d\u043e \u0437 \u0444\u0440\u0443\u043a\u0442\u043e\u0432\u0438\u043c \u0441\u043c\u0430\u043a\u043e\u043c","\u0406\u0433\u0440\u0438\u0441\u0442\u0435 \u0432\u0438\u043d\u043e \u0437 \u043f\u0440\u0438\u0454\u043c\u043d\u043e\u044e \u0441\u043e\u043b\u043e\u0434\u043a\u0456\u0441\u0442\u044e \u0442\u0430 \u0430\u0440\u043e\u043c\u0430\u0442\u043e\u043c \u0441\u0442\u0438\u0433\u043b\u0438\u0445 \u0444\u0440\u0443\u043a\u0442\u0456\u0432. \u0406\u0434\u0435\u0430\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0441\u0432\u044f\u0442\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0430\u0431\u043e \u044f\u043a \u0430\u043f\u0435\u0440\u0438\u0442\u0438\u0432.",349,8,2022,10.5,750,"67e125bebee36.jpg",0,"active",10]
[2025-03-24 10:28:30] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:28:30] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:28:30] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                ORDER BY p.name
Params: []
[2025-03-24 10:28:33] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:28:33] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:28:33] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                WHERE p.id = ?
Params: [10]
[2025-03-24 10:28:49] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:28:49] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:28:49] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                WHERE p.id = ?
Params: [10]
[2025-03-24 10:30:22] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:30:22] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:30:22] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                WHERE p.id = ?
Params: [10]
[2025-03-24 10:30:25] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["1"]
[2025-03-24 10:30:25] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-03-24 10:30:25] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                FROM products p 
                JOIN product_categories pc ON p.category_id = pc.id 
                ORDER BY p.name
Params: []
