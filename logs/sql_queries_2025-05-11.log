[2025-05-11 19:21:54] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["d544ef776287380ead0c6e7fa6b5a74e"]
[2025-05-11 19:21:54] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["43091ea289a8a558a6431aa345c0b390"]
[2025-05-11 19:21:54] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-05-11 19:21:54] [DEBUG] Query: SELECT COUNT(*) as total FROM (SELECT p.*, pc.name as category_name 
             FROM products p 
             JOIN product_categories pc ON p.category_id = pc.id 
             WHERE p.status = 'active'
             ORDER BY p.name ASC) as count_query
Params: []
[2025-05-11 19:21:54] [DEBUG] Query: SELECT p.*, pc.name as category_name 
             FROM products p 
             JOIN product_categories pc ON p.category_id = pc.id 
             WHERE p.status = 'active'
             ORDER BY p.name ASC LIMIT 0, 12
Params: []
[2025-05-11 19:21:54] [DEBUG] Query: SELECT * FROM promotions 
                 WHERE status = 'active' 
                 AND (NOW() BETWEEN start_date AND end_date)
                 ORDER BY min_order_amount DESC
Params: []
[2025-05-11 19:21:54] [DEBUG] Query: SELECT p.*, pc.name as category_name 
             FROM products p 
             JOIN product_categories pc ON p.category_id = pc.id 
             WHERE p.featured = 1 AND p.status = 'active'
             ORDER BY p.name
             LIMIT ?
Params: [4]
[2025-05-11 19:22:00] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["43091ea289a8a558a6431aa345c0b390"]
[2025-05-11 19:22:01] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["43091ea289a8a558a6431aa345c0b390"]
[2025-05-11 19:22:01] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["43091ea289a8a558a6431aa345c0b390"]
[2025-05-11 19:22:01] [DEBUG] Query: SELECT * FROM product_categories ORDER BY name
Params: []
[2025-05-11 19:22:01] [DEBUG] Query: SELECT COUNT(*) as total FROM (SELECT p.*, pc.name as category_name 
             FROM products p 
             JOIN product_categories pc ON p.category_id = pc.id 
             WHERE p.status = 'active'
             ORDER BY p.name ASC) as count_query
Params: []
[2025-05-11 19:22:01] [DEBUG] Query: SELECT p.*, pc.name as category_name 
             FROM products p 
             JOIN product_categories pc ON p.category_id = pc.id 
             WHERE p.status = 'active'
             ORDER BY p.name ASC LIMIT 0, 12
Params: []
[2025-05-11 19:22:01] [DEBUG] Query: SELECT * FROM promotions 
                 WHERE status = 'active' 
                 AND (NOW() BETWEEN start_date AND end_date)
                 ORDER BY min_order_amount DESC
Params: []
[2025-05-11 19:22:01] [DEBUG] Query: SELECT p.*, pc.name as category_name 
             FROM products p 
             JOIN product_categories pc ON p.category_id = pc.id 
             WHERE p.featured = 1 AND p.status = 'active'
             ORDER BY p.name
             LIMIT ?
Params: [4]
[2025-05-11 19:24:38] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["43091ea289a8a558a6431aa345c0b390"]
[2025-05-11 19:24:47] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["43091ea289a8a558a6431aa345c0b390"]
[2025-05-11 19:24:49] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["43091ea289a8a558a6431aa345c0b390"]
[2025-05-11 19:27:21] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["43091ea289a8a558a6431aa345c0b390"]
[2025-05-11 19:27:21] [DEBUG] Query: SELECT * FROM users WHERE username = ? AND status = 'active'
Params: ["suctomer1"]
[2025-05-11 19:27:27] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["43091ea289a8a558a6431aa345c0b390"]
[2025-05-11 19:27:27] [DEBUG] Query: SELECT * FROM users WHERE username = ? AND status = 'active'
Params: ["customer1"]
[2025-05-11 19:27:27] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-05-11 19:27:27] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["user_4"]
[2025-05-11 19:27:27] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-05-11 19:27:27] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-05-11 19:27:27] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-05-11 19:27:27] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-05-11 19:27:27] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-05-11 19:27:27] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-05-11 19:44:10] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-05-11 19:44:10] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["user_4"]
[2025-05-11 19:44:10] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-05-11 19:44:10] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-05-11 19:44:10] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-05-11 19:44:10] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-05-11 19:44:10] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-05-11 19:44:10] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-05-11 19:44:13] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-05-11 19:44:13] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["user_4"]
[2025-05-11 19:44:13] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-05-11 19:44:15] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-05-11 19:44:15] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["user_4"]
[2025-05-11 19:44:15] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-05-11 19:44:15] [DEBUG] Query: SELECT m.*, 
                 CASE 
                    WHEN m.sender_id = ? THEN 'outgoing' 
                    ELSE 'incoming' 
                 END as direction,
                 u.name as user_name, u.role as user_role
                 FROM messages m
                 LEFT JOIN users u ON (
                    CASE 
                        WHEN m.sender_id = ? THEN m.receiver_id 
                        ELSE m.sender_id 
                    END = u.id
                 )
                 WHERE m.sender_id = ? OR m.receiver_id = ?
                 ORDER BY m.created_at DESC
Params: ["4","4","4","4"]
[2025-05-11 19:44:16] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-05-11 19:44:16] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["user_4"]
[2025-05-11 19:44:16] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-05-11 19:44:16] [DEBUG] Query: SELECT o.*, 
                 (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                 FROM orders o
                 WHERE o.customer_id = ?
                 ORDER BY o.created_at DESC
Params: ["4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["user_4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT u.*, 
                         (SELECT COUNT(*) FROM orders WHERE customer_id = u.id) as order_count,
                         (SELECT SUM(total_amount) FROM orders WHERE customer_id = u.id) as total_spent,
                         (SELECT MAX(created_at) FROM orders WHERE customer_id = u.id) as last_order_date
                         FROM users u
                         WHERE u.id = ?
Params: ["4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT o.*, 
                       (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                       FROM orders o
                       WHERE o.customer_id = ?
                       ORDER BY o.created_at DESC
                       LIMIT 5
Params: ["4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                FROM products p
                JOIN product_categories pc ON p.category_id = pc.id
                WHERE p.category_id IN (
                    SELECT DISTINCT p2.category_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    JOIN products p2 ON oi.product_id = p2.id
                    WHERE o.customer_id = ?
                )
                AND p.id NOT IN (
                    SELECT oi.product_id
                    FROM orders o
                    JOIN order_items oi ON o.id = oi.order_id
                    WHERE o.customer_id = ?
                )
                AND p.status = 'active'
                LIMIT ?
Params: ["4","4",4]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT DISTINCT p.id, p.name, p.image, p.price, pc.name as category_name
                          FROM products p
                          JOIN product_categories pc ON p.category_id = pc.id
                          LEFT JOIN order_items oi ON p.id = oi.product_id
                          WHERE p.status = 'active'
                          AND (p.id NOT IN ())
                          GROUP BY p.id, p.name, p.image, p.price, pc.name
                          ORDER BY COUNT(oi.id) DESC
                          LIMIT ?
Params: [4]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT m.*, u.name as sender_name, u.role as sender_role
                         FROM messages m
                         JOIN users u ON m.sender_id = u.id
                         WHERE m.receiver_id = ? AND m.is_read = 0
                         ORDER BY m.created_at DESC
Params: ["4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT ci.*, p.name, p.image, p.price, p.stock_quantity
                FROM cart_items ci
                JOIN products p ON ci.product_id = p.id
                WHERE ci.session_id = ?
Params: ["user_4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT * FROM users WHERE id = ?
Params: ["4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT o.*, 
                 (SELECT COUNT(*) FROM order_items WHERE order_id = o.id) as items_count
                 FROM orders o
                 WHERE o.customer_id = ?
                 ORDER BY o.created_at DESC
Params: ["4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: ["7","4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: ["7"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: ["5","4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: ["5"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: ["3","4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: ["3"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT o.*, u.name as manager_name
                      FROM orders o
                      LEFT JOIN users u ON o.sales_manager_id = u.id
                      WHERE o.id = ? AND o.customer_id = ?
Params: ["1","4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT oi.*, p.name as product_name, p.image
                      FROM order_items oi
                      JOIN products p ON oi.product_id = p.id
                      WHERE oi.order_id = ?
Params: ["1"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["6"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["6"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","6"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["2"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["2"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["1","2"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["2","4"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["6"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["6"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","6"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["10"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["10"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","10"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["7"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["7"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["5","7"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["8"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["8"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["1","8"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["9"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["9"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["2","9"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["10"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["10"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","10"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["1"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["1"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["1","1"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["3"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["3"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["2","3"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.*, pc.name as category_name 
                       FROM products p 
                       JOIN product_categories pc ON p.category_id = pc.id 
                       WHERE p.id = ? AND p.status = 'active'
Params: ["6"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT pr.*, u.name as customer_name
                        FROM product_reviews pr
                        JOIN users u ON pr.customer_id = u.id
                        WHERE pr.product_id = ? AND pr.status = 'approved'
                        ORDER BY pr.created_at DESC
Params: ["6"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT p.id, p.name, p.image, p.price
                           FROM products p
                           WHERE p.category_id = ? AND p.id != ? AND p.status = 'active'
                           LIMIT 4
Params: ["4","6"]
[2025-05-11 19:44:17] [DEBUG] Query: SELECT m.*, 
                 CASE 
                    WHEN m.sender_id = ? THEN 'outgoing' 
                    ELSE 'incoming' 
                 END as direction,
                 u.name as user_name, u.role as user_role
                 FROM messages m
                 LEFT JOIN users u ON (
                    CASE 
                        WHEN m.sender_id = ? THEN m.receiver_id 
                        ELSE m.sender_id 
                    END = u.id
                 )
                 WHERE m.sender_id = ? OR m.receiver_id = ?
                 ORDER BY m.created_at DESC
Params: ["4","4","4","4"]
